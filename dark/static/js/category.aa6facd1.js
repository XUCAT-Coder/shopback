(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["category"],{"22b6":function(e,t,c){"use strict";function n(e){var t=e,c=t.appContext.config.globalProperties.$http;return c}c.d(t,"a",(function(){return n}))},7750:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a={class:""},r=Object(n["m"])("首页"),l=Object(n["m"])("商品管理"),b=Object(n["m"])("商品分类"),u=Object(n["m"])("添加分类"),o=Object(n["n"])("i",{class:"el-icon-caret-right"},null,-1),i=Object(n["n"])("i",{class:"el-icon-caret-right"},null,-1),j={key:0,class:"el-icon-circle-check"},O={key:1,class:"el-icon-circle-close"},d=Object(n["m"])("一级"),s=Object(n["m"])("二级"),f=Object(n["m"])("三级"),m={class:"btns"},p={class:"dialog-footer"},_=Object(n["m"])("取 消"),g=Object(n["m"])("确 定");function y(e,t,c,y,h,C){var v=Object(n["N"])("el-breadcrumb-item"),k=Object(n["N"])("el-breadcrumb"),w=Object(n["N"])("el-button"),F=Object(n["N"])("el-col"),N=Object(n["N"])("el-row"),I=Object(n["N"])("el-tag"),E=Object(n["N"])("el-table-column"),L=Object(n["N"])("el-tooltip"),V=Object(n["N"])("el-table"),D=Object(n["N"])("el-input"),x=Object(n["N"])("el-form-item"),A=Object(n["N"])("el-cascader"),P=Object(n["N"])("el-form"),J=Object(n["N"])("el-dialog"),R=Object(n["N"])("el-card");return Object(n["E"])(),Object(n["j"])("div",a,[Object(n["n"])(k,{"separator-class":"el-icon-arrow-right"},{default:Object(n["cb"])((function(){return[Object(n["n"])(v,{to:{path:"/home"}},{default:Object(n["cb"])((function(){return[r]})),_:1}),Object(n["n"])(v,null,{default:Object(n["cb"])((function(){return[l]})),_:1}),Object(n["n"])(v,null,{default:Object(n["cb"])((function(){return[b]})),_:1})]})),_:1}),Object(n["n"])(R,null,{default:Object(n["cb"])((function(){return[Object(n["n"])(N,null,{default:Object(n["cb"])((function(){return[Object(n["n"])(F,null,{default:Object(n["cb"])((function(){return[Object(n["n"])(w,{type:"primary",onClick:y.addCate},{default:Object(n["cb"])((function(){return[u]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),Object(n["n"])(V,{border:"",stripe:"",data:y.state.cateList,fit:""},{default:Object(n["cb"])((function(){return[Object(n["n"])(E,{type:"expand"},{default:Object(n["cb"])((function(e){return[(Object(n["E"])(!0),Object(n["j"])(n["b"],null,Object(n["L"])(e.row.children,(function(e,t){return Object(n["E"])(),Object(n["j"])(N,{key:e.id,class:["tagBot",0===t?"tagTop":""]},{default:Object(n["cb"])((function(){return[Object(n["n"])(F,{span:5},{default:Object(n["cb"])((function(){return[Object(n["n"])(I,{closable:""},{default:Object(n["cb"])((function(){return[Object(n["m"])(Object(n["R"])(e.cat_name),1)]})),_:2},1024),o]})),_:2},1024),Object(n["n"])(F,{span:19},{default:Object(n["cb"])((function(){return[(Object(n["E"])(!0),Object(n["j"])(n["b"],null,Object(n["L"])(e.children,(function(e,t){return Object(n["E"])(),Object(n["j"])(N,{key:e.id},{default:Object(n["cb"])((function(){return[Object(n["n"])(F,{span:8},{default:Object(n["cb"])((function(){return[Object(n["n"])(I,{type:"success",closable:""},{default:Object(n["cb"])((function(){return[Object(n["m"])(Object(n["R"])(e.cat_name),1)]})),_:2},1024),i]})),_:2},1024),Object(n["n"])(F,{span:16},{default:Object(n["cb"])((function(){return[(Object(n["E"])(!0),Object(n["j"])(n["b"],null,Object(n["L"])(e.children,(function(e,t){return Object(n["E"])(),Object(n["j"])(I,{type:"warning",key:e.id,closable:""},{default:Object(n["cb"])((function(){return[Object(n["m"])(Object(n["R"])(e.cat_name),1)]})),_:2},1024)})),128))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:2},1024)]})),_:2},1032,["class"])})),128))]})),_:1}),Object(n["n"])(E,{label:"角色名称",prop:"cat_name"}),Object(n["n"])(E,{label:"是否有效"},{default:Object(n["cb"])((function(e){return["false"!==e.row.cat_deleted?(Object(n["E"])(),Object(n["j"])("i",j)):(Object(n["E"])(),Object(n["j"])("i",O))]})),_:1}),Object(n["n"])(E,{label:"排序"},{default:Object(n["cb"])((function(e){return[0===e.row.cat_level?(Object(n["E"])(),Object(n["j"])(I,{key:0},{default:Object(n["cb"])((function(){return[d]})),_:1})):1===e.row.cat_level?(Object(n["E"])(),Object(n["j"])(I,{key:1,type:"success"},{default:Object(n["cb"])((function(){return[s]})),_:1})):(Object(n["E"])(),Object(n["j"])(I,{key:2,type:"info"},{default:Object(n["cb"])((function(){return[f]})),_:1}))]})),_:1}),Object(n["n"])(E,{label:"操作"},{default:Object(n["cb"])((function(e){return[Object(n["n"])("div",m,[Object(n["n"])(L,{class:"item",effect:"dark",content:"编辑",placement:"top",enterable:!1},{default:Object(n["cb"])((function(){return[Object(n["n"])(w,{type:"primary",icon:"el-icon-edit"})]})),_:1}),Object(n["n"])(L,{class:"item",effect:"dark",content:"删除",placement:"top",enterable:!1},{default:Object(n["cb"])((function(){return[Object(n["n"])(w,{type:"danger",icon:"el-icon-delete"})]})),_:1})])]})),_:1})]})),_:1},8,["data"]),Object(n["n"])(J,{title:"添加分类",modelValue:y.isAddForm,"onUpdate:modelValue":t[4]||(t[4]=function(e){return y.isAddForm=e}),width:"30%",onClose:y.CateFormClose},{footer:Object(n["cb"])((function(){return[Object(n["n"])("span",p,[Object(n["n"])(w,{onClick:t[3]||(t[3]=function(e){return y.isAddForm=!1})},{default:Object(n["cb"])((function(){return[_]})),_:1}),Object(n["n"])(w,{type:"primary",onClick:y.commitAddForm},{default:Object(n["cb"])((function(){return[g]})),_:1},8,["onClick"])])]})),default:Object(n["cb"])((function(){return[Object(n["n"])(P,{ref:"CateForm",model:y.addForm,"label-width":"80px",rules:y.Caterules},{default:Object(n["cb"])((function(){return[Object(n["n"])(x,{label:"分类名称",prop:"cat_name"},{default:Object(n["cb"])((function(){return[Object(n["n"])(D,{modelValue:y.addForm.cat_name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return y.addForm.cat_name=e})},null,8,["modelValue"])]})),_:1}),Object(n["n"])(x,{label:"父级分类:"},{default:Object(n["cb"])((function(){return[Object(n["n"])(A,{options:y.state.ParentCateList,props:y.props,onChange:y.handleChange,modelValue:y.state.selectedID,"onUpdate:modelValue":t[2]||(t[2]=function(e){return y.state.selectedID=e}),"expand-trigger":"hover",placeholder:"请选择",clearable:""},null,8,["options","props","onChange","modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClose"])]})),_:1})])}var h=c("22b6"),C=c("f930"),v={name:"",components:{},setup(){const e=Object(n["p"])(),t=Object(n["I"])({cateList:[],ParentCateList:[],selectedID:[]}),c=Object(n["I"])({type:3,pagenum:1,pagesize:5}),a=async()=>{const{data:n}=await Object(h["a"])(e).get("categories",c);if(200!==n.meta.status)return Object(C["a"])(e).error("获取商品列表失败");t.cateList=n.data};a();const r=Object(n["J"])(!1),l=()=>{o(),r.value=!0};let b=Object(n["I"])({cat_name:"",cat_pid:0,cat_level:0});const u=Object(n["I"])({cat_name:[{type:"string",required:!0,message:"请输入分类名称",trigger:"blur"},{min:3,max:16,message:"长度在 3 到 16 个字符",trigger:"blur"}]}),o=async()=>{const{data:c}=await Object(h["a"])(e).get("categories",{params:{type:2}});if(200!==c.meta.status)return Object(C["a"])(e).error("获取分类列表失败");t.ParentCateList=c.data},i=Object(n["I"])({value:"cat_id",label:"cat_name",children:"children",expandTrigger:"hover",checkStrictly:"true"}),j=()=>{if(t.selectedID.length>0)return b.cat_pid=t.selectedID[t.selectedID.length-1],void(b.cat_level=t.selectedID.length);b.cat_pid=0,b.cat_level=0},O=Object(n["J"])(null),d=()=>{null!==O.value&&O.value.validate(async t=>{if(!t)return;const{data:c}=await Object(h["a"])(e).post("categories",b);if(201!==c.meta.status)return Object(C["a"])(e).error("添加分类失败");a(),r.value=!1})},s=()=>{null!==O.value&&(O.value.resetFields(),t.selectedID=[],b.cat_pid=0,b.cat_level=0)};return Object(n["B"])(()=>{}),{queryInfo:c,getCategories:a,state:t,addCate:l,isAddForm:r,addForm:b,Caterules:u,getParentCateList:o,props:i,handleChange:j,commitAddForm:d,CateForm:O,CateFormClose:s}}};c("8e43");v.render=y;t["default"]=v},"8e43":function(e,t,c){"use strict";c("9ef3")},"9ef3":function(e,t,c){},f930:function(e,t,c){"use strict";function n(e){var t=e,c=t.appContext.config.globalProperties.$message;return c}c.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=category.aa6facd1.js.map